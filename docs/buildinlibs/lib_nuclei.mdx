---
sidebar_position: 21
---

# [nuclei] 赋予 Yak 漏扫能力

本身 Yak 并不具备漏洞扫描能力，但是作为一门希望一站式解决安全研发需求的语言，如果能在语言/语言库层面集成某一些具有成熟生态的漏洞扫描能力其实是非常令人激动的。

## Yaml PoC 解决方案

大约在 2019 年前后，xray 与 nuclei 为代表的 Yaml PoC 模式的漏洞扫描社区开始构建。

相比起 Python PoC/Exp 层次不齐的质量与杂乱无章的接口，"使用固定格式的 Yaml 来编写 PoC ，并把 PoC 通过特定引擎来调度执行" 这种方式来构建漏洞验证的体系，变得非常流行。

### Yaml PoC 的好处

对于提升 PoC 水平和整体质量把控非常好：

1. 提升编写人员编写 PoC 的下限，对没有研发语言基础的安全人员友好
1. 有助于 PoC 行为控制和整体质量把控
1. PoC 越多，社区依赖越强，越能吸引人


:::caution

当然，PoC 的质量并不完全可以由 Yaml PoC 和优秀的引擎来提供，编写 PoC 的人编写的规则需要足够谨慎，尽量减少误报和漏报。

漏报和误报率是一个 PoC 优秀与否的关键指标，小范围的样本数据并不真正真实。

:::

对商业/乙方公司：

1. 社区贡献的 PoC 可以完美反哺公司生态
1. 打造公司技术影响力，提升公司在安全社区的地位

### 但是 Yaml PoC 也并非银弹

1. 研发成本相对不高，意味着更容易出现竞品
1. 竞品的出现，会导致竞对公司搬运 PoC，做无用功，浪费所有人精力
1. 表现力受限制，如果想要通过 Yaml 来进行 Fuzz，势必会增加编写引擎的难度，同时 Yaml PoC 的学习成本也会变高

:::info 一个值得思考的问题

有意思的是，如果 Yaml Schema 的复杂度非常高，甚至可以和一门语言一样高了，那么为什么不直接用表现力更强的更合理的编程语言呢？

:::

## 为什么集成 Nuclei？而不是 xray？

认识作者的人可能都知道，作者曾供职于"长亭科技"，同时也是 `xray` 这个工具的研发人员之一。为什么不直接集成 `xray`，使用 nuclei 去构建 Yak 的漏扫能力？

### 依赖与原生集成

由于 xray 并不是开源产品，作为使用方，只能被允许使用 xray 的二进制发行版本，而且 Yak 希望一站式解决安全研发能力需求，依赖一个外部的二进制工具发行版意味着需要用户自行安装或者打包到 Yak 的安装过程。
同时也会给 Yak 引入依赖问题，当用户直接使用 Yak 的库的时候，发现不可用，需要下载/更新/安装到环境变量，这违背了 Yak 的初衷。

:::tip

从这里我们就可以明显看得出来，Yak 更像是一个土壤，或者基石，任何优秀的开源的安全产品都可以参与 Yak 的建设，成为 Yak 的一份子

如果你希望你的 MIT 协议的 Golang 安全工具内置进入 Yak 中，请联系我们~

:::

对比 nuclei，虽然 nuclei 的发行也是以二进制工具发行，但是他是开源，且遵守 MIT 协议，所以我们可以对其源码做[一定修改](https://github.com/yaklang/nuclei)，从而集成进我们的 Yak 语言中。

### 开源与 MIT 协议

![开源协议一图简介](/img/tutorial/source-license.png)
